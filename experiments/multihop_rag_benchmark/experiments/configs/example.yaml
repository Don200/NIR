# =============================================================================
# RAG vs GraphRAG Benchmark Configuration
# =============================================================================
# Пример конфига для OpenAI-compatible API
# Скопируй в свой файл и измени под свои нужды

# -----------------------------------------------------------------------------
# Пути
# -----------------------------------------------------------------------------
output_dir: "./benchmark_results"    # Результаты экспериментов
cache_dir: "./cache"                 # Кеш индексов и датасета

# -----------------------------------------------------------------------------
# Датасет
# -----------------------------------------------------------------------------
dataset:
  name: "yixuantt/MultiHopRAG"
  max_samples: 100  # null для всех 2556 сэмплов, или число для теста

# -----------------------------------------------------------------------------
# LLM для генерации ответов и извлечения сущностей
# -----------------------------------------------------------------------------
llm:
  api_key_env: "OPENAI_API_KEY"      # Имя переменной окружения с ключом
  api_base: "https://api.openai.com/v1"  # URL API (OpenAI или compatible)
  # api_base: "http://localhost:8000/v1"  # Пример для локального vLLM
  # api_base: "https://api.groq.com/openai/v1"  # Пример для Groq
  model: "gpt-4o-mini"               # Модель для генерации
  temperature: 0.0                   # 0 для детерминированных ответов
  max_tokens: 512                    # Макс. токенов в ответе

# -----------------------------------------------------------------------------
# Embedding модель
# -----------------------------------------------------------------------------
embedding:
  api_key_env: "OPENAI_API_KEY"
  api_base: "https://api.openai.com/v1"
  # api_base: "http://localhost:8080/v1"  # Для локального embedding сервера
  model: "text-embedding-ada-002"    # 1536 dimensions
  # model: "text-embedding-3-small"  # Альтернатива, 1536 dims
  batch_size: 100                    # Размер батча для эмбеддингов

# -----------------------------------------------------------------------------
# Vector RAG (как в статье)
# -----------------------------------------------------------------------------
vector_rag:
  chunk_size: 256      # Токенов на chunk (256 как в статье)
  chunk_overlap: 50    # Перекрытие между chunks
  top_k: 10            # Количество chunks для retrieval (10 как в статье)

# -----------------------------------------------------------------------------
# KG-based GraphRAG (LlamaIndex-style)
# -----------------------------------------------------------------------------
kg_rag:
  max_triplets_per_chunk: 10   # Макс. триплетов из одного chunk
  include_original_text: true  # Включать исходный текст в контекст
  max_hops: 2                  # Глубина обхода графа от найденных сущностей

# -----------------------------------------------------------------------------
# Community-based GraphRAG (Microsoft GraphRAG)
# -----------------------------------------------------------------------------
community_rag:
  graphrag_root: "./graphrag_index"  # Директория для MS GraphRAG
  community_level: 2                  # Уровень сообщества для local search
  local_search_top_k: 10
  global_search_top_k: 5

# -----------------------------------------------------------------------------
# Настройки оценки
# -----------------------------------------------------------------------------
evaluation:
  normalize_answers: true    # Нормализовать ответы (убрать артикли, пунктуацию)
  case_sensitive: false      # Регистронезависимое сравнение

# -----------------------------------------------------------------------------
# Методы для запуска
# -----------------------------------------------------------------------------
# Закомментируй ненужные методы
methods:
  - vector_rag              # Базовый Vector RAG
  - kg_rag                  # KG-based GraphRAG
  # - community_rag_local   # MS GraphRAG Local (требует pip install graphrag)
  # - community_rag_global  # MS GraphRAG Global
  - hybrid_selection        # Выбор метода по типу запроса
  - hybrid_integration      # Комбинация обоих методов
